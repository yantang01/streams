{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport React, { Component, createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport invariant from 'invariant';\nimport createConnectedFieldArray from './ConnectedFieldArray';\nimport prefixName from './util/prefixName';\nimport { withReduxForm } from './ReduxFormContext';\nimport validateComponentProp from './util/validateComponentProp';\n\nvar toArray = function toArray(value) {\n  return Array.isArray(value) ? value : [value];\n};\n\nvar wrapError = function wrapError(fn, key) {\n  return fn && function () {\n    var validators = toArray(fn);\n\n    for (var i = 0; i < validators.length; i++) {\n      var result = validators[i].apply(validators, arguments);\n\n      if (result) {\n        var _ref;\n\n        return _ref = {}, _ref[key] = result, _ref;\n      }\n    }\n  };\n};\n\nexport default function createFieldArray(structure) {\n  var ConnectedFieldArray = createConnectedFieldArray(structure);\n\n  var FieldArray = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(FieldArray, _Component);\n\n    function FieldArray(props) {\n      var _this;\n\n      _this = _Component.call(this, props) || this;\n      _this.ref = React.createRef();\n\n      if (!props._reduxForm) {\n        throw new Error('FieldArray must be inside a component decorated with reduxForm()');\n      }\n\n      return _this;\n    }\n\n    var _proto = FieldArray.prototype;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this2 = this;\n\n      this.props._reduxForm.register(this.name, 'FieldArray', function () {\n        return wrapError(_this2.props.validate, '_error');\n      }, function () {\n        return wrapError(_this2.props.warn, '_warning');\n      });\n    };\n\n    _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n      var oldName = prefixName(this.props, this.props.name);\n      var newName = prefixName(nextProps, nextProps.name);\n\n      if (oldName !== newName) {\n        // unregister old name\n        this.props._reduxForm.unregister(oldName); // register new name\n\n\n        this.props._reduxForm.register(newName, 'FieldArray');\n      }\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.props._reduxForm.unregister(this.name);\n    };\n\n    _proto.getRenderedComponent = function getRenderedComponent() {\n      invariant(this.props.forwardRef, 'If you want to access getRenderedComponent(), ' + 'you must specify a forwardRef prop to FieldArray');\n      return this.ref && this.ref.current.getRenderedComponent();\n    };\n\n    _proto.render = function render() {\n      return createElement(ConnectedFieldArray, _extends({}, this.props, {\n        name: this.name,\n        ref: this.ref\n      }));\n    };\n\n    _createClass(FieldArray, [{\n      key: \"name\",\n      get: function get() {\n        return prefixName(this.props, this.props.name);\n      }\n    }, {\n      key: \"dirty\",\n      get: function get() {\n        return !this.ref || this.ref.current.dirty;\n      }\n    }, {\n      key: \"pristine\",\n      get: function get() {\n        return !!(this.ref && this.ref.current.pristine);\n      }\n    }, {\n      key: \"value\",\n      get: function get() {\n        return this.ref ? this.ref.current.value : undefined;\n      }\n    }]);\n\n    return FieldArray;\n  }(Component);\n\n  FieldArray.propTypes = {\n    name: PropTypes.string.isRequired,\n    component: validateComponentProp,\n    props: PropTypes.object,\n    validate: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]),\n    warn: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]),\n    forwardRef: PropTypes.bool,\n    _reduxForm: PropTypes.object\n  };\n  return withReduxForm(FieldArray);\n}","map":{"version":3,"names":["_extends","_createClass","_inheritsLoose","React","Component","createElement","PropTypes","invariant","createConnectedFieldArray","prefixName","withReduxForm","validateComponentProp","toArray","value","Array","isArray","wrapError","fn","key","validators","i","length","result","apply","arguments","_ref","createFieldArray","structure","ConnectedFieldArray","FieldArray","_Component","props","_this","call","ref","createRef","_reduxForm","Error","_proto","prototype","componentDidMount","_this2","register","name","validate","warn","UNSAFE_componentWillReceiveProps","nextProps","oldName","newName","unregister","componentWillUnmount","getRenderedComponent","forwardRef","current","render","get","dirty","pristine","undefined","propTypes","string","isRequired","component","object","oneOfType","func","arrayOf","bool"],"sources":["/Users/ytang/Documents/React/streams/client/node_modules/redux-form/es/createFieldArray.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport React, { Component, createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport invariant from 'invariant';\nimport createConnectedFieldArray from './ConnectedFieldArray';\nimport prefixName from './util/prefixName';\nimport { withReduxForm } from './ReduxFormContext';\nimport validateComponentProp from './util/validateComponentProp';\n\nvar toArray = function toArray(value) {\n  return Array.isArray(value) ? value : [value];\n};\n\nvar wrapError = function wrapError(fn, key) {\n  return fn && function () {\n    var validators = toArray(fn);\n\n    for (var i = 0; i < validators.length; i++) {\n      var result = validators[i].apply(validators, arguments);\n\n      if (result) {\n        var _ref;\n\n        return _ref = {}, _ref[key] = result, _ref;\n      }\n    }\n  };\n};\n\nexport default function createFieldArray(structure) {\n  var ConnectedFieldArray = createConnectedFieldArray(structure);\n\n  var FieldArray = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(FieldArray, _Component);\n\n    function FieldArray(props) {\n      var _this;\n\n      _this = _Component.call(this, props) || this;\n      _this.ref = React.createRef();\n\n      if (!props._reduxForm) {\n        throw new Error('FieldArray must be inside a component decorated with reduxForm()');\n      }\n\n      return _this;\n    }\n\n    var _proto = FieldArray.prototype;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this2 = this;\n\n      this.props._reduxForm.register(this.name, 'FieldArray', function () {\n        return wrapError(_this2.props.validate, '_error');\n      }, function () {\n        return wrapError(_this2.props.warn, '_warning');\n      });\n    };\n\n    _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n      var oldName = prefixName(this.props, this.props.name);\n      var newName = prefixName(nextProps, nextProps.name);\n\n      if (oldName !== newName) {\n        // unregister old name\n        this.props._reduxForm.unregister(oldName); // register new name\n\n\n        this.props._reduxForm.register(newName, 'FieldArray');\n      }\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.props._reduxForm.unregister(this.name);\n    };\n\n    _proto.getRenderedComponent = function getRenderedComponent() {\n      invariant(this.props.forwardRef, 'If you want to access getRenderedComponent(), ' + 'you must specify a forwardRef prop to FieldArray');\n      return this.ref && this.ref.current.getRenderedComponent();\n    };\n\n    _proto.render = function render() {\n      return createElement(ConnectedFieldArray, _extends({}, this.props, {\n        name: this.name,\n        ref: this.ref\n      }));\n    };\n\n    _createClass(FieldArray, [{\n      key: \"name\",\n      get: function get() {\n        return prefixName(this.props, this.props.name);\n      }\n    }, {\n      key: \"dirty\",\n      get: function get() {\n        return !this.ref || this.ref.current.dirty;\n      }\n    }, {\n      key: \"pristine\",\n      get: function get() {\n        return !!(this.ref && this.ref.current.pristine);\n      }\n    }, {\n      key: \"value\",\n      get: function get() {\n        return this.ref ? this.ref.current.value : undefined;\n      }\n    }]);\n\n    return FieldArray;\n  }(Component);\n\n  FieldArray.propTypes = {\n    name: PropTypes.string.isRequired,\n    component: validateComponentProp,\n    props: PropTypes.object,\n    validate: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]),\n    warn: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]),\n    forwardRef: PropTypes.bool,\n    _reduxForm: PropTypes.object\n  };\n  return withReduxForm(FieldArray);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}