{"ast":null,"code":"import _toPath from \"lodash/toPath\";\n\nfunction createDeleteInWithCleanUp(structure) {\n  var shouldDeleteDefault = function shouldDeleteDefault(structure) {\n    return function (state, path) {\n      return structure.getIn(state, path) !== undefined;\n    };\n  };\n\n  var deepEqual = structure.deepEqual,\n      empty = structure.empty,\n      getIn = structure.getIn,\n      deleteIn = structure.deleteIn,\n      setIn = structure.setIn;\n  return function (shouldDelete) {\n    if (shouldDelete === void 0) {\n      shouldDelete = shouldDeleteDefault;\n    }\n\n    var deleteInWithCleanUp = function deleteInWithCleanUp(state, path) {\n      if (path[path.length - 1] === ']') {\n        // array path\n        var pathTokens = _toPath(path);\n\n        pathTokens.pop();\n        var parent = getIn(state, pathTokens.join('.'));\n        return parent ? setIn(state, path) : state;\n      }\n\n      var result = state;\n\n      if (shouldDelete(structure)(state, path)) {\n        result = deleteIn(state, path);\n      }\n\n      var dotIndex = path.lastIndexOf('.');\n\n      if (dotIndex > 0) {\n        var parentPath = path.substring(0, dotIndex);\n\n        if (parentPath[parentPath.length - 1] !== ']') {\n          var _parent = getIn(result, parentPath);\n\n          if (deepEqual(_parent, empty)) {\n            return deleteInWithCleanUp(result, parentPath);\n          }\n        }\n      }\n\n      return result;\n    };\n\n    return deleteInWithCleanUp;\n  };\n}\n\nexport default createDeleteInWithCleanUp;","map":{"version":3,"names":["_toPath","createDeleteInWithCleanUp","structure","shouldDeleteDefault","state","path","getIn","undefined","deepEqual","empty","deleteIn","setIn","shouldDelete","deleteInWithCleanUp","length","pathTokens","pop","parent","join","result","dotIndex","lastIndexOf","parentPath","substring","_parent"],"sources":["/Users/ytang/Documents/React/streams/client/node_modules/redux-form/es/deleteInWithCleanUp.js"],"sourcesContent":["import _toPath from \"lodash/toPath\";\n\nfunction createDeleteInWithCleanUp(structure) {\n  var shouldDeleteDefault = function shouldDeleteDefault(structure) {\n    return function (state, path) {\n      return structure.getIn(state, path) !== undefined;\n    };\n  };\n\n  var deepEqual = structure.deepEqual,\n      empty = structure.empty,\n      getIn = structure.getIn,\n      deleteIn = structure.deleteIn,\n      setIn = structure.setIn;\n  return function (shouldDelete) {\n    if (shouldDelete === void 0) {\n      shouldDelete = shouldDeleteDefault;\n    }\n\n    var deleteInWithCleanUp = function deleteInWithCleanUp(state, path) {\n      if (path[path.length - 1] === ']') {\n        // array path\n        var pathTokens = _toPath(path);\n\n        pathTokens.pop();\n        var parent = getIn(state, pathTokens.join('.'));\n        return parent ? setIn(state, path) : state;\n      }\n\n      var result = state;\n\n      if (shouldDelete(structure)(state, path)) {\n        result = deleteIn(state, path);\n      }\n\n      var dotIndex = path.lastIndexOf('.');\n\n      if (dotIndex > 0) {\n        var parentPath = path.substring(0, dotIndex);\n\n        if (parentPath[parentPath.length - 1] !== ']') {\n          var _parent = getIn(result, parentPath);\n\n          if (deepEqual(_parent, empty)) {\n            return deleteInWithCleanUp(result, parentPath);\n          }\n        }\n      }\n\n      return result;\n    };\n\n    return deleteInWithCleanUp;\n  };\n}\n\nexport default createDeleteInWithCleanUp;"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,eAApB;;AAEA,SAASC,yBAAT,CAAmCC,SAAnC,EAA8C;EAC5C,IAAIC,mBAAmB,GAAG,SAASA,mBAAT,CAA6BD,SAA7B,EAAwC;IAChE,OAAO,UAAUE,KAAV,EAAiBC,IAAjB,EAAuB;MAC5B,OAAOH,SAAS,CAACI,KAAV,CAAgBF,KAAhB,EAAuBC,IAAvB,MAAiCE,SAAxC;IACD,CAFD;EAGD,CAJD;;EAMA,IAAIC,SAAS,GAAGN,SAAS,CAACM,SAA1B;EAAA,IACIC,KAAK,GAAGP,SAAS,CAACO,KADtB;EAAA,IAEIH,KAAK,GAAGJ,SAAS,CAACI,KAFtB;EAAA,IAGII,QAAQ,GAAGR,SAAS,CAACQ,QAHzB;EAAA,IAIIC,KAAK,GAAGT,SAAS,CAACS,KAJtB;EAKA,OAAO,UAAUC,YAAV,EAAwB;IAC7B,IAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;MAC3BA,YAAY,GAAGT,mBAAf;IACD;;IAED,IAAIU,mBAAmB,GAAG,SAASA,mBAAT,CAA6BT,KAA7B,EAAoCC,IAApC,EAA0C;MAClE,IAAIA,IAAI,CAACA,IAAI,CAACS,MAAL,GAAc,CAAf,CAAJ,KAA0B,GAA9B,EAAmC;QACjC;QACA,IAAIC,UAAU,GAAGf,OAAO,CAACK,IAAD,CAAxB;;QAEAU,UAAU,CAACC,GAAX;QACA,IAAIC,MAAM,GAAGX,KAAK,CAACF,KAAD,EAAQW,UAAU,CAACG,IAAX,CAAgB,GAAhB,CAAR,CAAlB;QACA,OAAOD,MAAM,GAAGN,KAAK,CAACP,KAAD,EAAQC,IAAR,CAAR,GAAwBD,KAArC;MACD;;MAED,IAAIe,MAAM,GAAGf,KAAb;;MAEA,IAAIQ,YAAY,CAACV,SAAD,CAAZ,CAAwBE,KAAxB,EAA+BC,IAA/B,CAAJ,EAA0C;QACxCc,MAAM,GAAGT,QAAQ,CAACN,KAAD,EAAQC,IAAR,CAAjB;MACD;;MAED,IAAIe,QAAQ,GAAGf,IAAI,CAACgB,WAAL,CAAiB,GAAjB,CAAf;;MAEA,IAAID,QAAQ,GAAG,CAAf,EAAkB;QAChB,IAAIE,UAAU,GAAGjB,IAAI,CAACkB,SAAL,CAAe,CAAf,EAAkBH,QAAlB,CAAjB;;QAEA,IAAIE,UAAU,CAACA,UAAU,CAACR,MAAX,GAAoB,CAArB,CAAV,KAAsC,GAA1C,EAA+C;UAC7C,IAAIU,OAAO,GAAGlB,KAAK,CAACa,MAAD,EAASG,UAAT,CAAnB;;UAEA,IAAId,SAAS,CAACgB,OAAD,EAAUf,KAAV,CAAb,EAA+B;YAC7B,OAAOI,mBAAmB,CAACM,MAAD,EAASG,UAAT,CAA1B;UACD;QACF;MACF;;MAED,OAAOH,MAAP;IACD,CA/BD;;IAiCA,OAAON,mBAAP;EACD,CAvCD;AAwCD;;AAED,eAAeZ,yBAAf"},"metadata":{},"sourceType":"module"}