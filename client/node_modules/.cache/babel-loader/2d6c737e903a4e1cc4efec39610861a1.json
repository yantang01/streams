{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport React, { Component, createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport invariant from 'invariant';\nimport createConnectedField from './ConnectedField';\nimport shallowCompare from './util/shallowCompare';\nimport prefixName from './util/prefixName';\nimport plain from './structure/plain';\nimport { withReduxForm } from './ReduxFormContext';\nimport validateComponentProp from './util/validateComponentProp';\n\nfunction createField(structure) {\n  var ConnectedField = createConnectedField(structure);\n  var setIn = structure.setIn;\n\n  var Field = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(Field, _Component);\n\n    function Field(props) {\n      var _this;\n\n      _this = _Component.call(this, props) || this;\n      _this.ref = React.createRef();\n\n      _this.normalize = function (name, value) {\n        var normalize = _this.props.normalize;\n\n        if (!normalize) {\n          return value;\n        }\n\n        var previousValues = _this.props._reduxForm.getValues();\n\n        var previousValue = _this.value;\n        var nextValues = setIn(previousValues, name, value);\n        return normalize(value, previousValue, nextValues, previousValues, name);\n      };\n\n      if (!props._reduxForm) {\n        throw new Error('Field must be inside a component decorated with reduxForm()');\n      }\n\n      return _this;\n    }\n\n    var _proto = Field.prototype;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this2 = this;\n\n      this.props._reduxForm.register(this.name, 'Field', function () {\n        return _this2.props.validate;\n      }, function () {\n        return _this2.props.warn;\n      });\n    };\n\n    _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n      return shallowCompare(this, nextProps, nextState);\n    };\n\n    _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n      var oldName = prefixName(this.props, this.props.name);\n      var newName = prefixName(nextProps, nextProps.name);\n\n      if (oldName !== newName || // use deepEqual here because they could be a function or an array of functions\n      !plain.deepEqual(this.props.validate, nextProps.validate) || !plain.deepEqual(this.props.warn, nextProps.warn)) {\n        // unregister old name\n        this.props._reduxForm.unregister(oldName); // register new name\n\n\n        this.props._reduxForm.register(newName, 'Field', function () {\n          return nextProps.validate;\n        }, function () {\n          return nextProps.warn;\n        });\n      }\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.props._reduxForm.unregister(this.name);\n    };\n\n    _proto.getRenderedComponent = function getRenderedComponent() {\n      invariant(this.props.forwardRef, 'If you want to access getRenderedComponent(), ' + 'you must specify a forwardRef prop to Field');\n      return this.ref.current ? this.ref.current.getRenderedComponent() : undefined;\n    };\n\n    _proto.render = function render() {\n      return createElement(ConnectedField, _extends({}, this.props, {\n        name: this.name,\n        normalize: this.normalize,\n        ref: this.ref\n      }));\n    };\n\n    _createClass(Field, [{\n      key: \"name\",\n      get: function get() {\n        return prefixName(this.props, this.props.name);\n      }\n    }, {\n      key: \"dirty\",\n      get: function get() {\n        return !this.pristine;\n      }\n    }, {\n      key: \"pristine\",\n      get: function get() {\n        return !!(this.ref.current && this.ref.current.isPristine());\n      }\n    }, {\n      key: \"value\",\n      get: function get() {\n        return this.ref.current && this.ref.current.getValue();\n      }\n    }]);\n\n    return Field;\n  }(Component);\n\n  Field.propTypes = {\n    name: PropTypes.string.isRequired,\n    component: validateComponentProp,\n    format: PropTypes.func,\n    normalize: PropTypes.func,\n    onBlur: PropTypes.func,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onDragStart: PropTypes.func,\n    onDrop: PropTypes.func,\n    parse: PropTypes.func,\n    props: PropTypes.object,\n    validate: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]),\n    warn: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]),\n    forwardRef: PropTypes.bool,\n    immutableProps: PropTypes.arrayOf(PropTypes.string),\n    _reduxForm: PropTypes.object\n  };\n  return withReduxForm(Field);\n}\n\nexport default createField;","map":{"version":3,"names":["_extends","_createClass","_inheritsLoose","React","Component","createElement","PropTypes","invariant","createConnectedField","shallowCompare","prefixName","plain","withReduxForm","validateComponentProp","createField","structure","ConnectedField","setIn","Field","_Component","props","_this","call","ref","createRef","normalize","name","value","previousValues","_reduxForm","getValues","previousValue","nextValues","Error","_proto","prototype","componentDidMount","_this2","register","validate","warn","shouldComponentUpdate","nextProps","nextState","UNSAFE_componentWillReceiveProps","oldName","newName","deepEqual","unregister","componentWillUnmount","getRenderedComponent","forwardRef","current","undefined","render","key","get","pristine","isPristine","getValue","propTypes","string","isRequired","component","format","func","onBlur","onChange","onFocus","onDragStart","onDrop","parse","object","oneOfType","arrayOf","bool","immutableProps"],"sources":["/Users/ytang/Documents/React/streams/client/node_modules/redux-form/es/createField.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport React, { Component, createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport invariant from 'invariant';\nimport createConnectedField from './ConnectedField';\nimport shallowCompare from './util/shallowCompare';\nimport prefixName from './util/prefixName';\nimport plain from './structure/plain';\nimport { withReduxForm } from './ReduxFormContext';\nimport validateComponentProp from './util/validateComponentProp';\n\nfunction createField(structure) {\n  var ConnectedField = createConnectedField(structure);\n  var setIn = structure.setIn;\n\n  var Field = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(Field, _Component);\n\n    function Field(props) {\n      var _this;\n\n      _this = _Component.call(this, props) || this;\n      _this.ref = React.createRef();\n\n      _this.normalize = function (name, value) {\n        var normalize = _this.props.normalize;\n\n        if (!normalize) {\n          return value;\n        }\n\n        var previousValues = _this.props._reduxForm.getValues();\n\n        var previousValue = _this.value;\n        var nextValues = setIn(previousValues, name, value);\n        return normalize(value, previousValue, nextValues, previousValues, name);\n      };\n\n      if (!props._reduxForm) {\n        throw new Error('Field must be inside a component decorated with reduxForm()');\n      }\n\n      return _this;\n    }\n\n    var _proto = Field.prototype;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this2 = this;\n\n      this.props._reduxForm.register(this.name, 'Field', function () {\n        return _this2.props.validate;\n      }, function () {\n        return _this2.props.warn;\n      });\n    };\n\n    _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n      return shallowCompare(this, nextProps, nextState);\n    };\n\n    _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n      var oldName = prefixName(this.props, this.props.name);\n      var newName = prefixName(nextProps, nextProps.name);\n\n      if (oldName !== newName || // use deepEqual here because they could be a function or an array of functions\n      !plain.deepEqual(this.props.validate, nextProps.validate) || !plain.deepEqual(this.props.warn, nextProps.warn)) {\n        // unregister old name\n        this.props._reduxForm.unregister(oldName); // register new name\n\n\n        this.props._reduxForm.register(newName, 'Field', function () {\n          return nextProps.validate;\n        }, function () {\n          return nextProps.warn;\n        });\n      }\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.props._reduxForm.unregister(this.name);\n    };\n\n    _proto.getRenderedComponent = function getRenderedComponent() {\n      invariant(this.props.forwardRef, 'If you want to access getRenderedComponent(), ' + 'you must specify a forwardRef prop to Field');\n      return this.ref.current ? this.ref.current.getRenderedComponent() : undefined;\n    };\n\n    _proto.render = function render() {\n      return createElement(ConnectedField, _extends({}, this.props, {\n        name: this.name,\n        normalize: this.normalize,\n        ref: this.ref\n      }));\n    };\n\n    _createClass(Field, [{\n      key: \"name\",\n      get: function get() {\n        return prefixName(this.props, this.props.name);\n      }\n    }, {\n      key: \"dirty\",\n      get: function get() {\n        return !this.pristine;\n      }\n    }, {\n      key: \"pristine\",\n      get: function get() {\n        return !!(this.ref.current && this.ref.current.isPristine());\n      }\n    }, {\n      key: \"value\",\n      get: function get() {\n        return this.ref.current && this.ref.current.getValue();\n      }\n    }]);\n\n    return Field;\n  }(Component);\n\n  Field.propTypes = {\n    name: PropTypes.string.isRequired,\n    component: validateComponentProp,\n    format: PropTypes.func,\n    normalize: PropTypes.func,\n    onBlur: PropTypes.func,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onDragStart: PropTypes.func,\n    onDrop: PropTypes.func,\n    parse: PropTypes.func,\n    props: PropTypes.object,\n    validate: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]),\n    warn: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]),\n    forwardRef: PropTypes.bool,\n    immutableProps: PropTypes.arrayOf(PropTypes.string),\n    _reduxForm: PropTypes.object\n  };\n  return withReduxForm(Field);\n}\n\nexport default createField;"],"mappings":"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"},"metadata":{},"sourceType":"module"}